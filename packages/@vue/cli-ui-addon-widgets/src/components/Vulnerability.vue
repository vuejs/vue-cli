<template>
  <div class="vulnerability">
    <StatusWidget
      v-if="status"
      :icon="icons[status.status]"
      :icon-class="iconClasses[status.status]"
      :title="$t(`org.vue.widgets.vulnerability.messages.${status.status}`, { n: status.count })"
      :status="status"
      @check="checkForUpdates()"
    />
  </div>
</template>

<script>
import { UPDATES_ICON_CLASSES } from '../util/consts'

import StatusWidget from './StatusWidget.vue'

const UPDATES_ICONS = {
  'ok': 'verified_user',
  'loading': 'hourglass_full',
  'attention': 'error'
}

export default {
  components: {
    StatusWidget
  },

  sharedData () {
    return mapSharedData('org.vue.widgets.vulnerability.', {
      status: 'status'
    })
  },

  created () {
    this.icons = UPDATES_ICONS
    this.iconClasses = UPDATES_ICON_CLASSES
  },

  methods: {
    checkForUpdates () {
      // TODO
    }
  }
}
</script>
